<?xml version="1.0" standalone="no"?>
<?xml-stylesheet type="text/css" href="projetFinal.css" ?>
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600" viewBox="0 0 800 600" xmlns:xlink="http://www.w3.org/1999/xlink" >

<!-- definition of all the sprites-->
<defs>
  <!--Mountain -->
  <g  id='mountain' transform="translate(0,0)">
    <g transform="translate(-500,0)">
      <polygon id='rock' points="200,300 400,0 550,300"  />
      <polygon id='mountainPick' points="366,50 400,0 425,50" />
    </g>
    <g transform="translate(0,0)">
      <polygon id='rock' points="-100,300 100,0 200,300"  />
      <polygon id='mountainPick' points="66,50 100,0 118,50"  />
    </g>
    <g transform="translate(0,0)">
      <polygon id='rock' points="100,300 200,70 350,300"  />
      <polygon id='mountainPick' points="186,100 200,70 220,100"  />
    </g>
    <g transform="translate(0,0)">
      <polygon id='rock' points="200,300 400,0 550,300"  />
      <polygon id='mountainPick' points="366,50 400,0 425,50"  />
    </g>
    <g transform="translate(-50,0)">
      <polygon id='rock' points="450,300 650,70 750,300"  />
      <polygon id='mountainPick' points="623,100 650,70 664,100"  />
    </g>
  </g>
  <!--Tree -->
  <g  id='tree' transform="translate(100,100)">
      <!--leafs -->
      <g>
        <polygon id="tree" points="0,120 50,100 100,120" />
        <polygon id="tree" points="5,110 50,90 95,110" />
        <polygon id="tree" points="10,100 50,80 90,100"/>
        <polygon id="tree" points="15,90 50,70 85,90" />
        <polygon id="tree" points="20,80 50,65 80,80" />
        <polygon id="tree" points="30,70 50,50 70,70" />
        <polygon id="mountainPick" points="30,70 50,50 70,70" />
      </g>
      <!--trunk -->
      <g transform="translate(46,120)">
        <rect id="trunk" width='8' height='20' />
      </g>
  </g>
  <!--Group of Tree -->
  <g  id='group_tree' transform="translate(0,0)">
    <use xlink:href="#tree" x="0" y="100" />
    <use xlink:href="#tree" x="50" y="95" />
    <use xlink:href="#tree" x="180" y="100" />
    <use xlink:href="#tree" x="290" y="85" />
  </g>
  <!--snow branch -->
    <g id='snow-branch'>
      <rect x="0" y="0" rx="5" ry="5" width="150" height="10"/>
      <g transform="translate(10,-20) scale(0.5)" >
          <polyline points="0,0 50,50 0,100"/>
      </g>
      <g transform="translate(138,30) scale(0.5) rotate(180)" >
          <polyline points="0,0 50,50 0,100"/>
      </g>
    </g>
  <!--snow-flake -->
  <g  id='snow' transform="translate(0,0)">
    <use xlink:href="#snow-branch" x="0" y="0" />
    <g transform="translate(0,0) rotate(120 75 5)" >
      <use xlink:href="#snow-branch" x="0" y="0" />
    </g>
    <g transform="translate(0,0) rotate(240 75 5)" >
      <use xlink:href="#snow-branch" x="0" y="0" />
    </g>
  </g>
  <!--snow groupe -->
  <g  id='snow-groupe' transform="translate(0,0)">
    <g transform="scale(0.1)">
      <use xlink:href="#snow" x="0" y="0" />
      <use xlink:href="#snow" x="1000" y="1000" />
      <use xlink:href="#snow" x="500" y="562" />
      <use xlink:href="#snow" x="2000" y="152" />
      <use xlink:href="#snow" x="1235" y="230" />
      <use xlink:href="#snow" x="2569" y="784" />
      <use xlink:href="#snow" x="2258" y="985" />
    </g>
  </g>

  <!--snow fall -->
  <g  id='snow-fall' transform="translate(0,0)">
    <g transform="translate(0,0)">
      <use xlink:href="#snow-groupe" x="0" y="0" />
      <use xlink:href="#snow-groupe" x="300" y="0" />
      <use xlink:href="#snow-groupe" x="600" y="0" />

      <use xlink:href="#snow-groupe" x="0" y="100" />
      <use xlink:href="#snow-groupe" x="300" y="100" />
      <use xlink:href="#snow-groupe" x="600" y="100" />

      <use xlink:href="#snow-groupe" x="0" y="200" />
      <use xlink:href="#snow-groupe" x="300" y="200" />
      <use xlink:href="#snow-groupe" x="600" y="200" />

      <use xlink:href="#snow-groupe" x="0" y="300" />
      <use xlink:href="#snow-groupe" x="300" y="300" />
      <use xlink:href="#snow-groupe" x="600" y="300" />

      <use xlink:href="#snow-groupe" x="0" y="400" />
      <use xlink:href="#snow-groupe" x="300" y="400" />
      <use xlink:href="#snow-groupe" x="600" y="400" />
    </g>
  </g>

  <!--snow-animation slow-->
  <g  id='snow-animation-slow' transform="translate(0,0)">

    <g transform="translate(0,0) rotate(180 400 0)">
      <use xlink:href="#snow-fall" x="0" y="-500" />
      <use xlink:href="#snow-fall" x="0" y="0" />
    </g>
    <animateTransform id="snowFallStart" attributeName="transform" type="translate"
                              from="0 0"
                              to="0 500"
                              dur="4s"
                              begin="0s"
                              repeatCount="indefinite"
                              />
  </g>

  <!--snow-animation fast-->
  <g  id='snow-animation-fast' transform="translate(0,0)">

    <g transform="translate(0,0)">
      <use xlink:href="#snow-fall" x="0" y="-500" />
      <use xlink:href="#snow-fall" x="0" y="0" />
    </g>
    <animateTransform id="snowFallStart" attributeName="transform" type="translate"
                              from="0 0"
                              to="0 500"
                              dur="8s"
                              begin="0s"
                              repeatCount="indefinite"
                              />
  </g>

  <!--sky-->
  <g id='sky'>
      <rect width='800' height='500' />
  </g>
  <!--cloud-->
  <g id="cloud" transform="scale(0.2)">
      <path  class="cloud"
    d="M61.8,55.8
    c-33.4,4.2-57,34.7-52.7,68c3.9,31,30.5,53.5,61,53.2c0,0.3,0.1,0.6,0.1,0.8c3,23.3,24.2,39.7,47.5,36.8
    c13.5-1.7,24.8-9.6,31.2-20.5c11.1,17.6,31.8,28.2,53.9,25.4c23-2.9,40.9-19.5,46.6-40.6c4.2,0.5,8.5,0.5,12.8,0
    c28.5-3.6,48.6-29.6,45-58c-2.3-18.1-13.7-32.8-28.9-40.2c0-2.4-0.1-4.8-0.4-7.2c-3.5-27.6-28.7-47.1-56.3-43.6
    c-6.7,0.8-12.9,3-18.5,6.1c-12.6-21-36.7-33.7-62.5-30.4c-28.3,3.6-49.9,25.3-54.6,52.1"/>
  </g>
  <!-- moving cloud -->
  <g id="moving-cloud">
      <use xlink:href="#cloud" x="40" y="60" />
      <use xlink:href="#cloud" x="55" y="10" />
      <use xlink:href="#cloud" x="280" y="20" />
      <use xlink:href="#cloud" x="480" y="60" />
      <use xlink:href="#cloud" x="120" y="80" />
      <use xlink:href="#cloud" x="340" y="60" />
      <use xlink:href="#cloud" x="300" y="10" />
      <use xlink:href="#cloud" x="580" y="20" />
      <use xlink:href="#cloud" x="680" y="100" />
  </g>
  <!-- moving cloud slow -->
  <g id="moving-cloud-slow">
    <g transform="translate(0,0)">
      <use xlink:href="#moving-cloud" x="-800" y="0" />
      <use xlink:href="#moving-cloud" x="0" y="0" />
    </g>

    <animateTransform id="cloud-moving-slow" attributeName="transform" type="translate"
                              from="0 0"
                              to="800 0"
                              dur="60s"
                              begin="0s"
                              repeatCount="indefinite"
                              />
  </g>
  <!-- moving cloud slow -->
  <g id="moving-cloud-fast">
    <g transform="translate(0,-20) scale(0.5) rotate(180)">
      <use xlink:href="#moving-cloud" x="-1600" y="0" />
      <use xlink:href="#moving-cloud" x="-800" y="0" />
      <use xlink:href="#moving-cloud" x="0" y="0" />
      <use xlink:href="#moving-cloud" x="800" y="0" />
    </g>

    <g transform="translate(0,0) scale(0.5)">
      <use xlink:href="#moving-cloud" x="-1600" y="0" />
      <use xlink:href="#moving-cloud" x="-800" y="0" />
      <use xlink:href="#moving-cloud" x="0" y="0" />
      <use xlink:href="#moving-cloud" x="800" y="0" />
    </g>

    <animateTransform id="cloud-moving-fast" attributeName="transform" type="translate"
                              from="0 0"
                              to="800 0"
                              dur="120s"
                              begin="0s"
                              repeatCount="indefinite"
                              />
  </g>

  <g id="moving-cloud-fast">

  </g>
  <!-- ski-man scene 2 -->
  <g id="ski-man2"  transform="scale(0.2)">
    <ellipse id="body" transform="translate(100,150)" cx="0" cy="0" rx="20" ry="50"/>
    <circle id="head" transform="translate(100,100)" cx="0" cy="0" r="20"/>

    <line id="battons" transform="translate(40,190)" x1="0" y1="0" x2="60" y2="-30"/>

    <g id="hat">
      <rect id="bottom" transform="translate(79,90)" width="42" height="5" />
      <polygon id="middle" transform="translate(100,70)" points="-21,20 21,20, 0,0" />
      <circle id="top" transform="translate(100,70)" cx="0" cy="0" r="3" />
    </g>

    <g id="legs">
      <g id="leg">
        <line id="top" transform="translate(100,200)" x1="0" y1="0" x2="0" y2="30"/>
        <line id="bottom" transform="translate(100,230)" x1="0" y1="0" x2="0" y2="30"/>

      </g>
      <g id="ski">
        <line id="ski" transform="translate(40,260)" x1="0" y1="0" x2="120" y2="0"/>
        <line id="ski_tip" transform="translate(158,260)" x1="0" y1="0" x2="0" y2="-10"/>
      </g>
    </g>
  </g>

  <g id="line">
    <path id="jump-Line" d="M0 100 C 80 100,120 60, 250 40 S 300 40, 900 100"/>
      <animateMotion
        id="flyingman"
        xlink:href="#ski-man2" rotate="0" fill="freeze"
        calcMode = "paced"
        begin = "sceneA3.end" dur="5">
        <mpath xlink:href="#jump-Line" />
      </animateMotion>
  </g>
  <!-- ski-man scene 1 -->
  <g id="ski-man1"  transform="scale(0.4)">
    <ellipse id="body" transform="translate(0,-100)" cx="0" cy="0" rx="20" ry="50" fill="red"/>
    <circle id="head" transform="translate(0,-150)" cx="0" cy="0" r="20" fill="antiquewhite"/>

    <line id="battons" transform="translate(-50,-70)" x1="0" y1="0" x2="60" y2="-30" stroke="red" stroke-width="4"/>

    <g id="hat">
      <rect id="bottom" transform="translate(-21,-160)" width="42" height="5" fill="white"/>
      <polygon id="middle" transform="translate(0,-180)" points="-21,20 21,20, 0,0" fill="red"/>
      <circle id="top" transform="translate(0,-180)" cx="0" cy="0" r="3" fill="white"/>
    </g>

    <g id="legs">
      <g id="leg">
        <line id="top" transform="translate(0,-60)" x1="0" y1="0" x2="0" y2="60" stroke="red" stroke-width="4"/>
      </g>

      <g id="ski">
        <line id="ski" transform="translate(-60,0)" x1="0" y1="0" x2="120" y2="0" stroke="red" stroke-width="4"/>
        <line id="ski_tip" transform="translate(58,0)" x1="0" y1="0" x2="0" y2="-10" stroke="red" stroke-width="4"/>
      </g>
    </g>
  </g>
  <!-- background-->
  <g id="background">

    <use xlink:href="#sky" x="0" y="0" />
    <g transform="translate(0,300)">
      <rect width='800' height='205'/>
    </g>
    <use xlink:href="#mountain" x="100" y="50" />
    <use xlink:href="#group_tree" x="0" y="0" />
    <use xlink:href="#group_tree" x="200" y="0" />
  </g>

<!-- Sky Piste-->
  <g id="ski-piste">
    <path id="début" d="M0 100 L 60 100"/>
    <path id="piste" d="M60 100 C 80 100,90 120, 90 120 S 150 300, 500 350" />
    <path id="tremplin" d="M500 350 C 550,350 600,350 650,300"/>
    <path id="vol" d="M650 300 L 900 50"/>
  </g>

<!-- definition of all the different scene -->
  <!--Jumping scene -->
    <g id="JumpingScene">
      <use xlink:href="#background" x="0" y="0" />
      <use xlink:href="#background" x="800" y="0" />

      <use xlink:href="#snow-animation-fast" x="0" y="0" />
      <use xlink:href="#snow-animation-slow" x="40" y="0" />

      <use xlink:href="#moving-cloud-slow" x="0" y="0" />
      <use xlink:href="#moving-cloud-fast" x="100" y="100" />
      <use href="#ski-man1" x="0" y="0" />
      <pattern id="diagonalHatch" patternUnits="userSpaceOnUse" width="4" height="4">
        <path d="M-1,1 l2,-2
                 M0,4 l4,-4
                 M3,5 l2,-2"
              style="stroke:brown; stroke-width:1" />
      </pattern>
      <path id="tefes" d="M0 100 L 60 100 C 80 100,90 120, 90 120 S 150 300, 500 350 C 550,350 600,350 650,300 L 650,400 L 0,400 Z" stroke="grey" fill="url(#diagonalHatch)"/>

      <animateMotion
        id="début_piste"
        xlink:href="#ski-man1" rotate="auto" fill="freeze"
        calcMode="paced"
        begin="sceneA2.end"
        dur="3s">
        <mpath xlink:href="#début"/>
      </animateMotion>

      <animateMotion
        id="descente_piste"
        xlink:href="#ski-man1" rotate="auto" fill="freeze"
        calcMode="linear"
        keyPoints="0;0.1;0.2;0.3;0.4;0.5;0.6;0.7;0.8;0.9;1"
        keyTimes="0;0.3;0.5;0.6;0.7;0.75;0.8;0.85;0.9;0.95;1"
        begin="début_piste.end"
        dur="2s">
        <mpath xlink:href="#piste"/>
      </animateMotion>

      <animateMotion
        id="descente_tremplin"
        xlink:href="#ski-man1" rotate="auto" fill="freeze"
        calcMode="paced"
        begin="descente_piste.end"
        dur="0.2s">
        <mpath xlink:href="#tremplin"/>
      </animateMotion>

      <animateMotion
          id="descente_vol"
          xlink:href="#ski-man1" rotate="auto" fill="freeze"
          calcMode="paced"
          begin="descente_tremplin.end"
          dur="0.6s">
          <mpath xlink:href="#vol"/>
      </animateMotion>
    </g>

  <!-- END Jumping scene-->

  <!-- Flying scene -->
    <g id="FlyingScene">
      <use xlink:href="#background" x="-200" y="0" />
      <use xlink:href="#background" x="600" y="0" />

      <use xlink:href="#snow-animation-fast" x="0" y="0" />
      <use xlink:href="#snow-animation-slow" x="40" y="0" />

      <use xlink:href="#moving-cloud-slow" x="0" y="0" />
      <use xlink:href="#moving-cloud-fast" x="100" y="100" />

      <use xlink:href="#ski-man2" x="-100" y="100"/>
      <use xlink:href="#line" x="0" y="100" />
    </g>
  <!-- End Flying scene -->

  <!-- intro Scene -->
    <g id="IntroScene">
      <rect id="blackbackground" x="0" y="0"  width="800" height="600"/>
      <text x="250" y="250" fill="white" font-size="50" >Rocket Man</text>


      <use xlink:href="#ski-man1" transform="translate(-50,400)">
        <animateTransform id="movingskiman" attributeName="transform" type="translate"
                                    from="-50 400"
                                    to="850 400"
                                    dur="4s"
                                    begin="0s"
                                    repeatCount="1"/>
      </use>
      <rect id="whiteBackground" visibility="visible" transform="translate(-800,0)"  width="800" height="600" >
        <animateTransform id="snowmoving" attributeName="transform" type="translate"
                                    from="-900 0"
                                    to="0 0"
                                    dur="6s"
                                    begin="0s"
                                    repeatCount="1"
                                    fill="freeze"/>
      </rect>
    </g>
  <!-- End Into Scene -->

  <!-- Credit Scene -->
  <g id="CreditScene">
    <rect id="blackbackground" x="0" y="0"  width="800" height="600" />
    <text x="225" y="225" fill="white" font-size="50" >SVG Original by</text>
    <text x="250" y="300" fill="white" font-size="50" >Berguerre Téo</text>
    <text x="250" y="350" fill="white" font-size="50" >Bihan Baptiste</text>
    <text x="250" y="400" fill="white" font-size="50" >Viellard Bruno</text>
    <circle id="moon" cx="725" cy="50" r="40"  />
    <use xlink:href="#ski-man1" transform="translate(745,-125) scale(0.2) rotate(99)"/>
    <!-- ADD SNOW-->
    <use xlink:href="#snow-animation-fast" x="0" y="0" />
    <use xlink:href="#snow-animation-slow" x="40" y="0" />

    <g id="snow">
        <g transform="translate(0 0)">
          <circle cx="150" cy="750" r="220" fill="white" />
          <circle cx="540" cy="900" r="400" fill="white" />
          <rect x="0" y="600"  width="800" height="600" style="fill:rgb(255,255,255)"/>
        </g>
        <animateTransform id="snowmoving" attributeName="transform" type="translate"
                                    from="0 0"
                                    to="0 -500"
                                    dur="32s"
                                    begin="sceneA5.end"
                                    repeatCount="1"
                                    fill="freeze"/>
    </g>
  </g>
  <!-- End Credit Scene -->

</defs>

<!-- BEGIN Display-->

<use xlink:href="#IntroScene" x="0" y="0" visibility="visible">
  <animate id="sceneA1" attributeName="visibility" begin="snowmoving.end"
        from="visible" to="hidden" dur="1s" fill="freeze" />
</use>

 <use xlink:href="#JumpingScene" x="0" y="0" visibility="hidden">
   <animate id="sceneA2" attributeName="visibility" begin="sceneA1.end"
         from="hidden" to="visible" dur="1s" fill="freeze" />
</use>

<use xlink:href="#FlyingScene" x="0" y="0" visibility="hidden">
  <animate id="sceneA3" attributeName="visibility" begin="descente_vol.end"
        from="hidden" to="visible" dur="1s" fill="freeze" />
</use>

<use xlink:href="#CreditScene" x="0" y="0" visibility="hidden">
  <animate id="sceneA5" attributeName="visibility" begin="flyingman.end"
        from="hidden" to="visible" dur="1s" fill="freeze" />
</use>

<!-- END Display-->
</svg>
